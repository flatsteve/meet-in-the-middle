!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";let n;o.r(t);const r={center:{lat:51.515419,lng:-.141099},mapTypeControl:!1,zoom:12};let a;function i(e,{recenter:t=!0,animation:o="DROP",title:n="Location",markerColour:r="red"}={}){const i=`http://maps.google.com/mapfiles/ms/icons/${r}-dot.png`,l=new google.maps.Marker({position:e,map:a,animation:google.maps.Animation[o],title:n,icon:{url:i}});return t&&a.setOptions({center:e,zoom:15}),l}function l(e){const t=e.getCenter();i(t,{recenter:!1,animation:"BOUNCE",title:"The middle!"}),a.fitBounds(e),function(e,{type:t="restaurant"}={}){const o={location:e,radius:"500",type:t};n.nearbySearch(o,(e,t)=>{t==google.maps.places.PlacesServiceStatus.OK&&(console.log(e),e.forEach(e=>{i(e.geometry.location,{title:e.name})}))})}(t)}let c={yourLocation:{coordinates:null,ref:null,marker:null},theirLocation:{coordinates:null,ref:null,marker:null}};const u=new Promise(e=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const o={lat:t.coords.latitude,lng:t.coords.longitude},n=new google.maps.Circle({center:o,radius:t.coords.accuracy}).getBounds();!function(e){a.setCenter(e)}(o),e(n)},()=>{e(null)}):e(null)});function s({inputId:e,bounds:t}){let o=new google.maps.places.Autocomplete(document.getElementById(e),{bounds:t,types:["geocode"]});return o.setFields(["geometry"]),o.addListener("place_changed",()=>(function(e){const t=c[e].ref.getPlace().geometry.location,o={lat:t.lat(),lng:t.lng()};let n,r;"yourLocation"===e?(n="Your Location",r="purple"):(n="Their Location",r="pink"),c[e].coordinates=o,c[e].marker&&c[e].marker.setMap(null),c[e].marker=i(o,{title:n,markerColour:r})})(e)),o}const d=a=new google.maps.Map(document.getElementById("map"),r);!async function(){const e=await u;c.yourLocation.ref=s({inputId:"yourLocation",bounds:e}),c.theirLocation.ref=s({inputId:"theirLocation",bounds:e})}(),function(e){n=new google.maps.places.PlacesService(e)}(d),document.getElementById("meet").addEventListener("click",function(){let e=new google.maps.LatLngBounds;for(let t in c)e.extend(c[t].coordinates);l(e)})}]);